# ═══════════════════════════════════════════════════════════════
# RAGLOX v3.0 - Redis Configuration
# Blackboard Architecture - Shared State Storage
# ═══════════════════════════════════════════════════════════════

# ═══════════════════════════════════════════════════════════════
# Network
# ═══════════════════════════════════════════════════════════════
bind 0.0.0.0
port 6379
protected-mode no

# ═══════════════════════════════════════════════════════════════
# Memory Management
# ═══════════════════════════════════════════════════════════════
maxmemory 2gb
maxmemory-policy allkeys-lru

# ═══════════════════════════════════════════════════════════════
# Persistence (RDB + AOF)
# ═══════════════════════════════════════════════════════════════
# RDB Snapshots
save 900 1
save 300 10
save 60 10000

# Append Only File (AOF)
appendonly yes
appendfsync everysec
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

# ═══════════════════════════════════════════════════════════════
# Pub/Sub Configuration
# ═══════════════════════════════════════════════════════════════
# Enable keyspace notifications for Pub/Sub
notify-keyspace-events "KEA"

# ═══════════════════════════════════════════════════════════════
# Performance Tuning
# ═══════════════════════════════════════════════════════════════
# TCP keepalive
tcp-keepalive 300

# Client output buffer limits for Pub/Sub
client-output-buffer-limit pubsub 32mb 8mb 60

# ═══════════════════════════════════════════════════════════════
# Logging
# ═══════════════════════════════════════════════════════════════
loglevel notice
logfile ""

# ═══════════════════════════════════════════════════════════════
# Slow Log
# ═══════════════════════════════════════════════════════════════
slowlog-log-slower-than 10000
slowlog-max-len 128

# ═══════════════════════════════════════════════════════════════
# Connections
# ═══════════════════════════════════════════════════════════════
maxclients 10000
timeout 0

# ═══════════════════════════════════════════════════════════════
# Streams (for Redis Streams - Task Queues)
# ═══════════════════════════════════════════════════════════════
stream-node-max-bytes 4096
stream-node-max-entries 100
